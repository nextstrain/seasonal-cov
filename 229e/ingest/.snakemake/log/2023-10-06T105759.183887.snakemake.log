Building DAG of jobs...
Using shell: /Users/katekistler/.nextstrain/runtimes/conda/env/bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Job stats:
job                count
---------------  -------
curate                 1
subset_metadata        1
total                  2

Select jobs to execute...

[Fri Oct  6 10:57:59 2023]
rule curate:
    input: data/ncbi.ndjson, data/all-geolocation-rules.tsv, config/annotations.tsv
    output: results/all_metadata.tsv, results/sequences.fasta
    log: logs/curate.txt
    jobid: 1
    benchmark: benchmarks/curate.txt
    reason: Updated input files: config/annotations.tsv
    resources: tmpdir=/var/folders/g_/6938g_6s199gxxswt2nf7w500000gn/T


        (cat data/ncbi.ndjson             | ./vendored/transform-field-names                 --field-map Accession=accession 'Isolate Lineage'=strain 'Geographic Region'=region 'Geographic Location'=country 'Isolate Collection date'=date 'Host Name'=host 'Submitter Names'=authors 'Submitter Affiliation'=institution 'SRA Accessions'=sra_accession             | augur curate normalize-strings             | augur curate format-dates                 --date-fields date                 --expected-date-formats %Y %Y-%m %Y-%m-%d %Y-%m-%dT%H:%M:%SZ             | ./vendored/transform-genbank-location             | augur curate titlecase                 --titlecase-fields region country division location                 --articles and d de del des di do en l la las le los nad of op sur the y                 --abbreviations USA             | ./vendored/transform-authors                 --authors-field authors                 --default-value ?                 --abbr-authors-field abbr_authors             | ./vendored/apply-geolocation-rules                 --geolocation-rules data/all-geolocation-rules.tsv             | ./vendored/merge-user-metadata                 --annotations config/annotations.tsv                 --id-field accession             | augur curate passthru                 --output-metadata results/all_metadata.tsv                 --output-fasta results/sequences.fasta                 --output-id-field accession                 --output-seq-field sequence ) 2>> logs/curate.txt
        
[Fri Oct  6 10:58:01 2023]
Finished job 1.
1 of 2 steps (50%) done
Select jobs to execute...

[Fri Oct  6 10:58:01 2023]
rule subset_metadata:
    input: results/all_metadata.tsv
    output: results/subset_metadata.tsv
    jobid: 0
    reason: Input files updated by another job: results/all_metadata.tsv
    resources: tmpdir=/var/folders/g_/6938g_6s199gxxswt2nf7w500000gn/T


        tsv-select -H -f accession,strain,date,region,country,host,sra_accession,abbr_authors,authors,institution             results/all_metadata.tsv > results/subset_metadata.tsv
        
[Fri Oct  6 10:58:01 2023]
Finished job 0.
2 of 2 steps (100%) done
Complete log: .snakemake/log/2023-10-06T105759.183887.snakemake.log
